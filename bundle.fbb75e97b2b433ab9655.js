!function(){var t={443:function(t){var e;t.exports=((e=function(){function t(t){return s.appendChild(t.dom),t}function n(t){for(var e=0;e<s.children.length;e++)s.children[e].style.display=e===t?"block":"none";o=t}var o=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",(function(t){t.preventDefault(),n(++o%s.children.length)}),!1);var i=(performance||Date).now(),r=i,l=0,c=t(new e.Panel("FPS","#0ff","#002")),a=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:s,addPanel:t,showPanel:n,begin:function(){i=(performance||Date).now()},end:function(){l++;var t=(performance||Date).now();if(a.update(t-i,200),t>r+1e3&&(c.update(1e3*l/(t-r),100),r=t,l=0,h)){var e=performance.memory;h.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){i=this.end()},domElement:s,setMode:n}}).Panel=function(t,e,n){var o=1/0,s=0,i=Math.round,r=i(window.devicePixelRatio||1),l=80*r,c=48*r,a=3*r,h=2*r,f=3*r,d=15*r,u=74*r,p=30*r,g=document.createElement("canvas");g.width=l,g.height=c,g.style.cssText="width:80px;height:48px";var m=g.getContext("2d");return m.font="bold "+9*r+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,l,c),m.fillStyle=e,m.fillText(t,a,h),m.fillRect(f,d,u,p),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(f,d,u,p),{dom:g,update:function(c,y){o=Math.min(o,c),s=Math.max(s,c),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,l,d),m.fillStyle=e,m.fillText(i(c)+" "+t+" ("+i(o)+"-"+i(s)+")",a,h),m.drawImage(g,f+r,d,u-r,p,f,d,u-r,p),m.fillRect(f+u-r,d,r,p),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(f+u-r,d,r,i((1-c/y)*p))}}},e)}},e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";const t=["111111111111","1.....2....1","1.22.....2.1","1..........1","1.22.......1","1.2......2.1","1.....2....1","111111111111"],e=window.innerWidth,o=window.innerHeight,s=(Math.floor(e/2),Math.floor(o/2)),i=100,r=o-20*t.length,l=Math.PI/3,c=l/2,a=Math.floor(e/2),h=l/a,f=a/(2*Math.tan(c))*i,d=Math.floor(e/a),u=Math.floor(12),p=2*Math.PI,g=Math.floor(a/2)-1,m=new Map,y=new Set;function w(t){return Math.floor(180*t/Math.PI)}t.forEach(((t,e)=>{for(let n=0;n<t.length;n++)"."!==t[n]&&(y.add([n*i,e*i]),"1"===t[n]?m.set([n*i,e*i],"1"):"2"===t[n]&&m.set([n*i,e*i],"2"))}));class x{constructor(t,...e){this.context=t,this.textures={1:e[0],2:e[1],S:e[2]}}clear(){this.context.clearRect(0,0,e,o)}background(t){w(t),this.context.drawImage(this.textures.S,0,0,e,s),this.context.fillStyle="rgb(30, 30, 30)",this.context.fillRect(0,s,e,s)}world(t){(function(t,e={}){const n=void 0===e.key?t=>t:e.key,o=void 0!==e.reverse&&e.reverse,s=t.map(((t,e)=>[n(t),e])),i=Array.isArray(s[0][0])?(t,e)=>{for(let n=0;n<Math.min(t.length,e.length);n++){const o=t[n],s=e[n],i=o===s?0:o>s?1:-1;if(0!==i)return i}return t.length-e.length}:(t,e)=>{const n=t[0],o=e[0];return n===o?0:n>o?1:-1};return s.sort(i),o&&s.reverse(),s.map((e=>t[e[1]]))})(t,{key:t=>t[0],reverse:!0}).forEach((t=>{if(t[0]){const[e,n]=t;this.context.drawImage(...n)}}))}miniMap(e){const n=0+Math.floor(e.posX/5),o=r+Math.floor(e.posY/5);this.context.fillStyle="#000",this.context.fillRect(0,r,20*t[0].length,20*t.length),this.context.strokeStyle="rgb(220, 220, 0)",this.context.beginPath(),this.context.moveTo(n,o),this.context.lineTo(n+12*Math.cos(e.getAngle),o+12*Math.sin(e.getAngle)),this.context.closePath(),this.context.stroke(),this.context.fillStyle="rgb(255, 140, 0)",this.context.beginPath(),this.context.arc(n,o,5,0,2*Math.PI),this.context.fill(),y.forEach((t=>{this.context.fillStyle="rgb(97, 61, 25)",this.context.fillRect(t[0]/5+0,t[1]/5+r,20,20)}))}}function M(t){return Math.floor(t/i)*i}class b{constructor(t,e,n,o,s,r){if(this.object=t,this.isStatic=e,this.posX=n*i,this.posY=o*i,this.shift=s,this.scale=r,!e){this.spriteAngles=[];for(let t=0;t<8;t++)this.spriteAngles[t]=[];for(let t=0;t<360;t+=45)for(let e=t;e<t+45;e++)this.spriteAngles[t/45].push(e);this.spritePositions=new Map,this.spriteAngles.forEach(((t,e)=>{this.spritePositions.set(t,this.object[e])}))}}objectLocate(t,e){const n=[],o=[];for(let t=0;t<100;t++)n.push(e[0]);for(let t=0;t<100;t++)o.push(e[e.length-1]);const i=[...n,...e,...o],r=this.posX-t.posX,l=this.posY-t.posY;let u=Math.sqrt(r**2+l**2),m=Math.atan2(l,r),y=m-t.getAngle;(r>0&&180<=w(t.getAngle)&&w(t.getAngle)<=360||r<0&&l<0)&&(y+=p);const x=Math.floor(y/h),M=g+x;u*=Math.cos(c-M*h);const b=M+100;if(0<=b&&b<=a-1+200&&u<i[b][0]){if(!this.isStatic){m<0&&(m+=p),m=360-w(m);for(let t of this.spriteAngles)if(t.includes(m)){this.object=this.spritePositions.get(this.spriteAngles[t[0]/45]);break}}const t=Math.floor(f/u*this.scale),e=Math.floor(t/2),n=e*this.shift;return[u,[this.object,M*d-e,s-e+n,t,t]]}return!1}}const v=document.getElementById("wall1"),A=document.getElementById("wall2"),S=document.getElementById("sky"),P=document.getElementById("barrel"),E=document.getElementById("pedestal"),R=[];for(let t=0;t<8;t++)R.push(document.getElementById(`cacodemon${t}`));const k=new class{constructor(){this.x=150,this.y=350,this.angle=0}get posX(){return this.x}get posY(){return this.y}get getAngle(){return this.angle}movement(t){const e=Math.sin(this.angle),n=Math.cos(this.angle);t.up&&(this.x+=2*n,this.y+=2*e),t.down&&(this.x+=-2*n,this.y+=-2*e),t.left&&(this.x+=2*e,this.y+=-2*n),t.right&&(this.x+=-2*e,this.y+=2*n),t.turnLeft&&(this.angle-=.01),t.turnRight&&(this.angle+=.01),this.angle=this.angle%p<0?p+this.angle%p:this.angle%p}},I=new class{constructor(...t){this.spriteTypes={barrel:t[0],pedestal:t[1],cacodemon:t[2]},this.listOfObjects=[new b(this.spriteTypes.barrel,!0,7.1,2.1,1.8,.4),new b(this.spriteTypes.barrel,!0,5.9,2.1,1.8,.4),new b(this.spriteTypes.pedestal,!0,8.8,2.5,1.6,.5),new b(this.spriteTypes.pedestal,!0,8.8,5.6,1.6,.5),new b(this.spriteTypes.cacodemon,!1,7,4,-1.5,.7)]}}(P,E,R);var j=n(443),T=n.n(j);const L=document.createElement("canvas");L.setAttribute("width",e),L.setAttribute("height",o);const B=new(T());B.showPanel(0),document.body.insertAdjacentElement("afterbegin",L),document.body.insertAdjacentElement("afterbegin",B.dom);const K=L.getContext("2d"),O={up:!1,down:!1,left:!1,right:!1,turnLeft:!1,turnRight:!1};let X=0,Y=performance.now();const D=1/60;function H(){let t=performance.now();for(X+=(t-Y)/1e3;X>D;)X-=D;Y=t,B.begin(),function(t,n){const r=new x(t,v,A,S);k.movement(n),r.clear(),r.background(k.getAngle);const l=function(t,n){const r=[],l=M(t.posX),p=M(t.posY);let g=t.getAngle-c;for(let c=0;c<a;c++){const a=Math.sin(g),y=Math.cos(g);let w,x,b,v,A,S,P=!1,E=!1,R=y>=0?l+i:l,k=y>=0?1:-1;for(let n=0;n<e;n+=i){w=(R-t.posX)/y,b=t.posY+w*a;for(let t of m.keys())t[0]===M(R+k)&&t[1]===M(b)&&(A=m.get(t),P=!0);if(P)break;R+=k*i}let I=a>=0?p+i:p,j=a>=0?1:-1;for(let e=0;e<o;e+=i){x=(I-t.posY)/a,v=t.posX+x*y;for(let t of m.keys())t[0]===M(v)&&t[1]===M(I+j)&&(S=m.get(t),E=!0);if(E)break;I+=j*i}let T=w<x?w:x,L=w<x?b:v;const B=w<x?A:S;L=Math.floor(L)%i,T*=Math.cos(t.getAngle-g),T=Math.max(T,1e-5);const K=Math.min(Math.floor(f/T),2*o),O=[n[B],L*u,0,u,1200,c*d,s-Math.floor(K/2),d,K];r.push([T,O]),g+=h}return r}(k,r.textures),p=[];I.listOfObjects.forEach((t=>{p.push(t.objectLocate(k,l))})),r.world([...l,...p]),r.miniMap(k)}(K,O),B.end(),requestAnimationFrame(H)}window.addEventListener("load",(function(){H()})),document.onkeydown=function(t){"KeyW"===t.code&&(O.up=!0),"KeyS"===t.code&&(O.down=!0),"KeyA"===t.code&&(O.left=!0),"KeyD"===t.code&&(O.right=!0),"ArrowLeft"===t.code&&(O.turnLeft=!0),"ArrowRight"===t.code&&(O.turnRight=!0)},document.onkeyup=function(t){"KeyW"===t.code&&(O.up=!1),"KeyS"===t.code&&(O.down=!1),"KeyA"===t.code&&(O.left=!1),"KeyD"===t.code&&(O.right=!1),"ArrowLeft"===t.code&&(O.turnLeft=!1),"ArrowRight"===t.code&&(O.turnRight=!1)}}()}();