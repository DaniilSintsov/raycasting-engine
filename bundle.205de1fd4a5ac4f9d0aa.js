!function(){var t={443:function(t){var e;t.exports=((e=function(){function t(t){return i.appendChild(t.dom),t}function n(t){for(var e=0;e<i.children.length;e++)i.children[e].style.display=e===t?"block":"none";o=t}var o=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(t){t.preventDefault(),n(++o%i.children.length)}),!1);var r=(performance||Date).now(),l=r,a=0,c=t(new e.Panel("FPS","#0ff","#002")),s=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:t,showPanel:n,begin:function(){r=(performance||Date).now()},end:function(){a++;var t=(performance||Date).now();if(s.update(t-r,200),t>l+1e3&&(c.update(1e3*a/(t-l),100),l=t,a=0,h)){var e=performance.memory;h.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){r=this.end()},domElement:i,setMode:n}}).Panel=function(t,e,n){var o=1/0,i=0,r=Math.round,l=r(window.devicePixelRatio||1),a=80*l,c=48*l,s=3*l,h=2*l,f=3*l,d=15*l,u=74*l,g=30*l,m=document.createElement("canvas");m.width=a,m.height=c,m.style.cssText="width:80px;height:48px";var p=m.getContext("2d");return p.font="bold "+9*l+"px Helvetica,Arial,sans-serif",p.textBaseline="top",p.fillStyle=n,p.fillRect(0,0,a,c),p.fillStyle=e,p.fillText(t,s,h),p.fillRect(f,d,u,g),p.fillStyle=n,p.globalAlpha=.9,p.fillRect(f,d,u,g),{dom:m,update:function(c,x){o=Math.min(o,c),i=Math.max(i,c),p.fillStyle=n,p.globalAlpha=1,p.fillRect(0,0,a,d),p.fillStyle=e,p.fillText(r(c)+" "+t+" ("+r(o)+"-"+r(i)+")",s,h),p.drawImage(m,f+l,d,u-l,g,f,d,u-l,g),p.fillRect(f+u-l,d,l,g),p.fillStyle=n,p.globalAlpha=.9,p.fillRect(f+u-l,d,l,r((1-c/x)*g))}}},e)}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";const t=[["11111111111"],["1.........1"],["1..2...2..1"],["1.........1"],["1..2...2..1"],["1.........1"],["11111111111"]],e=window.innerWidth,o=window.innerHeight,i=(Math.floor(e/2),Math.floor(o/2)),r=100,l=o-20*t.length,a=Math.PI/3,c=a/2,s=Math.floor(e/2),h=a/s,f=s/(2*Math.tan(c))*r,d=Math.floor(e/s),u=Math.floor(12),g="#000",m=150,p=150,x=0,y=2,w=new Map,M=new Set;function v(t){return Math.floor(t/r)*r}t.forEach(((t,e)=>{for(let n=0;n<t[0].length;n++)"."!==t[0][n]&&(M.add([n*r,e*r]),"1"===t[0][n]?w.set([n*r,e*r],"1"):"2"===t[0][n]&&w.set([n*r,e*r],"2"))}));class b{constructor(t,...e){this.context=t,this.textures={1:e[0],2:e[1],S:e[2]}}clear(){this.context.clearRect(0,0,e,o)}background(t){const n=180*t/Math.PI*-10%e;this.context.drawImage(this.textures.S,n,0,e,i),this.context.drawImage(this.textures.S,n-e,0,e,i),this.context.drawImage(this.textures.S,n+e,0,e,i),this.context.fillStyle="rgb(30, 30, 30)",this.context.fillRect(0,i,e,i)}world(t,n,l){!function(t,n,l,a,m){const p=v(n),x=v(l);let y=a-c;for(let c=0;c<s;c++){const s=Math.sin(y),M=Math.cos(y);let b,S,A,R,P,E,k=!1,I=!1,L=M>=0?p+r:p,K=M>=0?1:-1;for(let t=0;t<e;t+=r){b=(L-n)/M,A=l+b*s;for(let t of w.keys())t[0]===v(L+K)&&t[1]===v(A)&&(P=w.get(t),k=!0);if(k)break;L+=K*r}let D=s>=0?x+r:x,T=s>=0?1:-1;for(let t=0;t<o;t+=r){S=(D-l)/s,R=n+S*M;for(let t of w.keys())t[0]===v(R)&&t[1]===v(D+T)&&(E=w.get(t),I=!0);if(I)break;D+=T*r}let j=b<S?b:S,B=b<S?A:R;const H=b<S?P:E;B=Math.floor(B)%r,j*=Math.cos(a-y),j=Math.max(j,1e-5);const O=Math.min(Math.floor(f/j),2*o);H?t.drawImage(m[H],B*u,0,u,1200,c*d,i-Math.floor(O/2),d,O):(t.fillStyle=g,t.fillRect(c*d,i-Math.floor(O/2),d,O)),y+=h}}(this.context,t,n,l,this.textures)}miniMap(e){const n=0+Math.floor(e.posX/5),o=l+Math.floor(e.posY/5);this.context.fillStyle=g,this.context.fillRect(0,l,20*t[0][0].length,20*t.length),this.context.strokeStyle="rgb(220, 220, 0)",this.context.beginPath(),this.context.moveTo(n,o),this.context.lineTo(n+12*Math.cos(e.getAngle),o+12*Math.sin(e.getAngle)),this.context.closePath(),this.context.stroke(),this.context.fillStyle="rgb(255, 140, 0)",this.context.beginPath(),this.context.arc(n,o,5,0,2*Math.PI),this.context.fill(),M.forEach((t=>{this.context.fillStyle="rgb(97, 61, 25)",this.context.fillRect(t[0]/5+0,t[1]/5+l,20,20)}))}}const S=document.getElementById("wall1"),A=document.getElementById("wall2"),R=document.getElementById("sky"),P=new class{constructor(){this.x=m,this.y=p,this.angle=x}get posX(){return this.x}get posY(){return this.y}get getAngle(){return this.angle}movement(t){const e=Math.sin(this.angle),n=Math.cos(this.angle);t.up&&(this.x+=y*n,this.y+=y*e),t.down&&(this.x+=-y*n,this.y+=-y*e),t.left&&(this.x+=y*e,this.y+=-y*n),t.right&&(this.x+=-y*e,this.y+=y*n),t.turnLeft&&(this.angle-=.01),t.turnRight&&(this.angle+=.01)}};var E=n(443),k=n.n(E);const I=document.createElement("canvas");I.setAttribute("width",e),I.setAttribute("height",o);const L=new(k());L.showPanel(0),document.body.insertAdjacentElement("afterbegin",I),document.body.insertAdjacentElement("afterbegin",L.dom);const K=I.getContext("2d"),D={up:!1,down:!1,left:!1,right:!1,turnLeft:!1,turnRight:!1};let T=0,j=performance.now();const B=1/60;function H(){let t=performance.now();for(T+=(t-j)/1e3;T>B;)T-=B;j=t,L.begin(),function(t,e){const n=new b(t,S,A,R);P.movement(e),n.clear(),n.background(P.getAngle),n.world(P.posX,P.posY,P.getAngle),n.miniMap(P)}(K,D),L.end(),requestAnimationFrame(H)}window.addEventListener("load",(function(){H()})),document.onkeydown=function(t){"KeyW"===t.code&&(D.up=!0),"KeyS"===t.code&&(D.down=!0),"KeyA"===t.code&&(D.left=!0),"KeyD"===t.code&&(D.right=!0),"ArrowLeft"===t.code&&(D.turnLeft=!0),"ArrowRight"===t.code&&(D.turnRight=!0)},document.onkeyup=function(t){"KeyW"===t.code&&(D.up=!1),"KeyS"===t.code&&(D.down=!1),"KeyA"===t.code&&(D.left=!1),"KeyD"===t.code&&(D.right=!1),"ArrowLeft"===t.code&&(D.turnLeft=!1),"ArrowRight"===t.code&&(D.turnRight=!1)}}()}();